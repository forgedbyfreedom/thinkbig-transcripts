      - name: Commit and safely push changes
        run: |
          set -e
          git config user.name "GitHub Action"
          git config user.email "actions@github.com"

          echo "ğŸ”„ Fetching latest remote state..."
          git fetch origin main

          echo "ğŸ§© Rebasing on top of latest main..."
          git rebase origin/main || {
            echo "âš ï¸ Rebase failed, trying merge instead..."
            git merge --strategy-option ours origin/main -m "Merge remote changes safely"
          }

          echo "ğŸ“ Adding and committing transcript updates..."
          git add -A
          git commit -m "Auto-update master transcripts $(date +'%Y-%m-%d %H:%M:%S')" || echo "No changes to commit."

          echo "ğŸš€ Pushing changes to remote..."
          git push origin HEAD:main || {
            echo "âš ï¸ Normal push failed, retrying with force-with-lease..."
            git push --force-with-lease origin HEAD:main
          }

          echo "âœ… All done!"
      - name: Commit and safely push changes
        run: |
          set -e
          git config user.name "GitHub Action"
          git config user.email "actions@github.com"

          echo "ğŸ”„ Syncing with latest remote before committing..."
          git fetch origin main
          git checkout main
          git pull --rebase origin main || echo "âš ï¸ Pull with rebase failed, continuing."

          echo "ğŸ“ Adding and committing any transcript updates..."
          git add -A
          git commit -m "Auto-update master transcripts $(date +'%Y-%m-%d %H:%M:%S')" || echo "No changes to commit."

          echo "ğŸš€ Pushing updates to remote..."
          git push origin main || (echo "âš ï¸ Push failed, retrying with force-with-lease..." && git push --force-with-lease origin main)

          echo "âœ… Finished Git sync successfully."

